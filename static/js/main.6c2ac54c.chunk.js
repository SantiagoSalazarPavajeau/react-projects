(this["webpackJsonpreact-projects"]=this["webpackJsonpreact-projects"]||[]).push([[0],{253:function(e,t,n){e.exports=n(417)},417:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return me}));var a=n(0),r=n.n(a),o=n(45),c=n.n(o),s=n(61),l=n(32),i=n(223),u=n(26),p=n(224);n.n(p).a;var d=Object(s.c)({projects:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PROJECT":var n={title:t.newProject.title,started:"",description:t.newProject.description,id:t.newProject.id};return[].concat(Object(u.a)(e),[n]);case"DELETE_PROJECT":return Object(u.a)(e.filter((function(e){return e.id!==t.id})));case"EDIT_PROJECT":var a=e.findIndex((function(e){return e.id===t.project.id}));return[].concat(Object(u.a)(e.slice(0,a)),[t.project],Object(u.a)(e.slice(a+1)));case"LOAD_PROJECTS":var r=t.projects.data.map((function(e){return e.attributes}));return Object(u.a)(e.concat(r));case"LOADING_PROJECTS":return Object(u.a)(e);default:return e}},tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TASK":return console.log(t.task),console.log(e),Object(u.a)(e.concat(t.newTask));case"DELETE_TASK":return Object(u.a)(e.filter((function(e){return e.id!==t.id})));case"EDIT_TASK":var n=e.findIndex((function(e){return e.id===t.task.id}));return console.log(t.task),[].concat(Object(u.a)(e.slice(0,n)),[t.task],Object(u.a)(e.slice(n+1)));case"LOAD_TASKS":var a=t.tasks.data.map((function(e){return e.attributes}));return Object(u.a)(e.concat(a));default:return e}},people:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PERSON":var n={username:t.newPerson.username,image:t.newPerson.image,id:t.newPerson.id};return[].concat(Object(u.a)(e),[n]);case"DELETE_PERSON":var a;return console.log(t.id),e.map((function(e){return e.id!==t.id?a=e:null})),Object(u.a)(e.filter((function(e){return e.username!==a.username})));case"LOAD_PEOPLE":var r=t.people.data.map((function(e){return e.attributes}));return Object(u.a)(e.concat(r));default:return e}}}),m=n(15),h=n(16),f=n(17),E=n(21),k=n(24),j=n(22),g=(n(90),function(e){return r.a.createElement("div",{className:"ui stackable menu"},r.a.createElement("div",{className:"header item"},"Projects Dashboard"),e.currentUser.token?null:r.a.createElement(k.b,{to:"/login",className:"ui item"},"Login"),e.currentUser.token?null:r.a.createElement(k.b,{to:"/signup",className:"ui item"},"Signup"),e.currentUser.token?r.a.createElement(k.b,{to:"/profile",className:"ui item"},"Profile"):null,e.currentUser.token?r.a.createElement(k.b,{className:"ui item right",onClick:function(t){return e.handleLogout(t)}}," Logout "):null)}),b=function(){return r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:"ui left vertical inverted icon visible sidebar menu"},r.a.createElement(k.b,{to:"/",className:"item"},r.a.createElement("i",{"aria-hidden":"true",className:"home icon"}),"Home"),r.a.createElement(k.b,{to:"/projects",className:"item"},r.a.createElement("i",{"aria-hidden":"true",className:"sitemap icon"}),"Projects"),r.a.createElement(k.b,{to:"/people",className:"item"},r.a.createElement("i",{"aria-hidden":"true",className:"users icon"}),"People")))},v="https://secure-shelf-48338.herokuapp.com/";function T(e){var t={method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({title:e.title,description:e.description})};return function(n){fetch("".concat(v,"/projects/").concat(e.id),t).then((function(e){return e.json()})).then((function(e){console.log(e);var t=e.data.attributes;n({type:"EDIT_PROJECT",project:t})}))}}var O="https://secure-shelf-48338.herokuapp.com/";function y(e){var t={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({description:"New task...",project_id:e,person_id:1,completed:!1})};return console.log("b"),function(e){console.log("c"),fetch("".concat(O,"/tasks"),t).then((function(e){return e.json()})).then((function(t){console.log("d");var n=t.data.attributes;console.log(t),e({type:"ADD_TASK",newTask:n})})),console.log("e")}}function P(e){var t={method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json"}};return function(n){fetch("".concat(O,"/tasks/").concat(e),t).then((function(e){return e.json()})).then((function(){n({type:"DELETE_TASK",id:e})}))}}function C(e){var t={method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({description:e.description,person_id:parseInt(e.person_id),project_id:e.project_id,completed:e.completed})};return function(n){fetch("".concat(O,"/tasks/").concat(e.id),t).then((function(e){return e.json()})).then((function(e){console.log(e);var t=e.data.attributes;n({type:"EDIT_TASK",task:t})}))}}var S=n(427),w=n(436),D=n(29),A=n(161),N=n(121),M=n(244),_=n(431),L=n(435),U=function(e){return r.a.createElement(_.a.Button,{onClick:e.closeModal,type:"submit"},"Cancel")},x=function(e){return r.a.createElement(_.a.Input,{type:"text",onChange:function(t){return e.handleOnChange(t)},value:e.title,name:"title",placeholder:e.title})},I=function(e){return r.a.createElement(_.a.TextArea,{type:"text",onChange:function(t){return e.handleOnChange(t)},value:e.description,name:"description",placeholder:e.description})},F=function(e){Object(f.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={title:"",description:"",showModal:!1},e.handleOnChange=function(t){e.setState(Object(D.a)({},t.target.name,t.target.value))},e.handleOnSubmit=function(t){t.preventDefault(),e.props.saveProject(e.state),e.setState({title:"",description:"",showModal:!1})},e.openModal=function(){e.setState({showModal:!0})},e.closeModal=function(){e.setState({showModal:!1})},e.renderForm=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{onClick:e.openModal}," ",r.a.createElement("i",{className:"add icon center"})),r.a.createElement(N.a,{dimmer:"inverted",open:e.state.showModal},r.a.createElement(N.a.Header,null,"Add a project"),r.a.createElement(N.a.Content,{image:!0},r.a.createElement(M.a,{wrapped:!0,size:"medium",alt:"Workbench and tools",src:"https://images.unsplash.com/photo-1416339158484-9637228cc908?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1934&q=80"}),r.a.createElement(N.a.Description,null,r.a.createElement(_.a,null,r.a.createElement(L.a,null,"Title:"),r.a.createElement(x,{handleOnChange:e.handleOnChange,title:e.state.title}),r.a.createElement(L.a,null,"Description:"),r.a.createElement(I,{handleOnChange:e.handleOnChange,description:e.state.description}),r.a.createElement(_.a.Button,{onClick:function(t){return e.handleOnSubmit(t)},type:"submit"},"Submit"),r.a.createElement(U,{closeModal:e.closeModal}))))))},e}return Object(h.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.renderForm())}}]),n}(a.Component),J=n(430),H=n(429),R=n(428),K=n(432),W=n(89),z=function(e){Object(f.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={description:e.props.description,id:e.props.id,person_id:e.props.person_id,completed:e.props.completed,project_id:e.props.project_id},e.makeCompleted=function(){e.setState({completed:!0})},e.makeInProgress=function(){e.setState({completed:!1})},e.handleSave=function(){console.log(e.state.person_id),e.props.editTask(e.state)},e.handleDelete=function(){e.props.deleteTask(e.props.id)},e.assignTo=function(t){var n=e.props.people.findIndex((function(e){return e.username===t.target.innerText}));e.setState({person_id:e.props.people[n].id})},e.renderInProgress=function(){var t=[];e.props.people.map((function(e){return t.push({key:e.username,text:e.username,value:e.username,image:{avatar:!0,src:e.image}})}));var n=t.find((function(t){return t.id===e.state.person_id}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement(S.a,{size:"small",labelPosition:"right",type:"text",value:e.state.description,placeholder:e.state.description},r.a.createElement(R.a,{onChange:function(t){return e.setState({description:t.target.value})},value:e.state.description,rows:"4",cols:"70"}),r.a.createElement(A.a,{onClick:e.handleSave,icon:"save"}),r.a.createElement(A.a,{onClick:e.makeCompleted,icon:"check circle"}),r.a.createElement(A.a,{onClick:e.handleDelete,icon:"trash"})),r.a.createElement("br",null),"Assigned to: ",r.a.createElement(K.a,{button:!0,className:"icon",placeholder:n?n.key:"Yet to be assigned",onChange:function(t){return e.assignTo(t)},floating:!0,labeled:!0,icon:"users",options:t}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null))},e.renderCompleted=function(){var t=e.props.people.find((function(t){return t.id===e.state.person_id}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement(W.a,{color:"green",image:!0},r.a.createElement("img",{alt:"Profile Pic",src:"https://api.adorable.io/avatars/77/stevie@adorable.io.png"}),"completed by ",t?t.key:"Yet to be assigned",r.a.createElement(W.a.Detail,null,e.props.description)),r.a.createElement(A.a,{onClick:e.handleSave,icon:"save"}),r.a.createElement(A.a,{onClick:e.makeInProgress,icon:"redo"}),r.a.createElement(A.a,{onClick:e.handleDelete,icon:"trash"}),r.a.createElement("br",null))},e}return Object(h.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,null,this.state.completed?this.renderCompleted():this.renderInProgress()))}}]),n}(a.Component),B=n(243),q=(n(415),function(e){Object(f.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={title:e.props.project.title,started:e.props.project.started,description:e.props.project.description,id:e.props.project.id,edit:!1,loading:!1},e.setPercent=function(){for(var t=e.props.tasks.filter((function(t){return t.project_id===e.state.id})),n=0,a=0,r=0,o=0;o<t.length;o++)!0===t[o].completed?(a++,console.log(a)):r++,n=a/(r+a);e.setState({percent:100*n})},e.startEdit=function(){e.setState({edit:!0})},e.cancelEdit=function(){e.setState({edit:!1})},e.saveEdit=function(t){t.preventDefault(),e.props.editProject({title:e.state.title,started:e.props.project.started,id:e.props.project.id,description:e.state.description}),e.setState({edit:!1})},e.handleOnChange=function(t){e.setState(Object(D.a)({},t.target.name,t.target.value))},e.renderEdit=function(t){return r.a.createElement(N.a.Description,null,r.a.createElement(_.a,{onSubmit:function(t){return e.saveEdit(t)}},r.a.createElement(_.a.Input,{type:"text",onChange:function(t){return e.handleOnChange(t)},value:e.state.title,name:"title"}),r.a.createElement(_.a.TextArea,{type:"textarea",onChange:function(t){return e.handleOnChange(t)},value:e.state.description,name:"description"}),r.a.createElement(A.a,{icon:"save",type:"submit"}),r.a.createElement(A.a,{icon:"close",onClick:e.cancelEdit})))},e.renderDescription=function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{columns:3},r.a.createElement(w.a.Row,null,r.a.createElement(w.a.Column,null,r.a.createElement(A.a,{basic:!0,secondary:!0,content:"Edit Project",labelPosition:"right",icon:"pencil",onClick:function(t){return e.startEdit(t)}})),r.a.createElement(w.a.Column,null),r.a.createElement(w.a.Column,null,r.a.createElement(A.a,{basic:!0,content:"Exit Project Page",onClick:function(t){return e.props.handleHideTasksModal(t)},secondary:!0})))),r.a.createElement(L.a,null,t.title),r.a.createElement("p",null,t.description))},e.renderTasks=function(){return e.props.tasks.filter((function(t){return t.project_id===e.state.id})).map((function(t){return r.a.createElement(z,{key:t.id,people:e.props.people,person_id:t.person_id,deleteTask:e.props.deleteTask,project_id:e.state.id,editTask:e.props.editTask,id:t.id,description:t.description,completed:t.completed})}))},e.handleAddTask=function(){console.log("a"),e.props.addTask(e.state.id),console.log("g"),console.log(e.state.id)},e.renderModal=function(){if(e.props.loading)return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"ui grid container"},r.a.createElement("div",{className:"eight wide column"},r.a.createElement(N.a,{size:"large",dimmer:"inverted",open:!0},r.a.createElement("p",null,"Loading")))));var t=e.props.project;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"ui grid container"},r.a.createElement("div",{className:"eight wide column"},r.a.createElement(N.a,{size:"large",dimmer:"inverted",open:!0},r.a.createElement(N.a.Header,null),r.a.createElement(N.a.Content,{image:!0,scrolling:!0},r.a.createElement(M.a,{size:"medium",alt:"Workbench and tools",src:"https://images.unsplash.com/photo-1416339158484-9637228cc908?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1934&q=80",wrapped:!0}),r.a.createElement(N.a.Description,null,e.state.edit?e.renderEdit(t):e.renderDescription(t),r.a.createElement(B.Progress,{type:"circle",width:30,percent:e.state.percent,status:"success"}),r.a.createElement(H.a,{horizontal:!0},"Tasks"),r.a.createElement(A.a,{basic:!0,secondary:!0,onClick:e.handleAddTask},"Add Task"),r.a.createElement("br",null),e.renderTasks()))))))},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.setPercent()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.renderModal())}}]),n}(a.Component)),G=Object(j.e)(q),Q=function(e){Object(f.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={open:!1,edit:!1,percent:50,showTasksModal:!1},e.handleDeleteClick=function(t){e.setState({open:!0})},e.handleCancel=function(){e.setState({open:!1})},e.handleConfirm=function(){e.props.deleteProject(e.props.id),e.setState({open:!1})},e.setPercent=function(){console.log(e.props);e.setState({percent:0})},e.handleShowTasksModal=function(){e.setState({showTasksModal:!0})},e.handleHideTasksModal=function(){e.setState({showTasksModal:!1})},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.showTasksModal?r.a.createElement(G,{handleHideTasksModal:this.handleHideTasksModal,project:this.props.project,tasks:this.props.tasks,people:this.props.people,editProject:this.props.editProject,addTask:this.props.addTask,deleteTask:this.props.deleteTask,editTask:this.props.editTask}):null,r.a.createElement("div",{className:"eight wide column"},r.a.createElement("div",{className:"ui card"},r.a.createElement("div",{className:"image"}),r.a.createElement("div",{className:"content"},r.a.createElement(k.b,{className:"header",onClick:function(t){return e.handleShowTasksModal(t)}},this.props.title),r.a.createElement("div",{className:"meta"},r.a.createElement("span",{className:"date"},this.props.started)),r.a.createElement("div",{className:"description"},this.props.description),r.a.createElement("div",{className:"ui right aligned grid"},r.a.createElement("div",{className:"sixteen wide column"}))),r.a.createElement("div",{className:"extra content"},r.a.createElement("div",{className:"left floated right aligned six wide column"},r.a.createElement(k.b,{className:"header",onClick:function(t){return e.handleShowTasksModal(t)}},r.a.createElement(A.a,{basic:!0,icon:"pencil"})),r.a.createElement(A.a,{basic:!0,icon:"trash",onClick:function(t){return e.handleDeleteClick(t)}}),r.a.createElement(J.a,{open:this.state.open,onCancel:this.handleCancel,onConfirm:this.handleConfirm}))))))}}]),n}(a.Component),Y=function(e){Object(f.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={showFormModal:!1,searchTerm:""},e.renderProjects=function(){return e.props.projects.filter((function(t){return t.title.includes(e.state.searchTerm)})).map((function(t){return r.a.createElement(Q,{key:t.id,project:t,people:e.props.people,tasks:e.props.tasks,title:t.title,started:t.started,description:t.description,id:t.id,editProject:e.props.editProject,deleteProject:e.props.deleteProject,addTask:e.props.addTask,deleteTask:e.props.deleteTask,editTask:e.props.editTask})}))},e.renderModal=function(){e.setState({showFormModal:!0})},e.setSearchState=function(){},e.handleSearchProject=function(t){e.setState({searchTerm:t.target.value})},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"ui grid container"},r.a.createElement("div",{className:"eight wide column"},r.a.createElement(S.a,{className:"large",placeholder:"Search",onChange:function(t){return e.handleSearchProject(t)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(F,{saveProject:this.props.saveProject}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(w.a,{stackable:!0,container:!0,columns:2},this.renderProjects()),r.a.createElement("br",null),r.a.createElement("br",null))}}]),n}(a.Component),$=Object(l.b)((function(e){return{projects:e.projects,tasks:e.tasks,people:e.people}}),(function(e){return{saveProject:function(t){return e(function(e){var t={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({title:e.title,description:e.description})};return function(e){fetch("".concat(v,"/projects"),t).then((function(e){return e.json()})).then((function(t){var n=t.data.attributes;e({type:"ADD_PROJECT",newProject:n})}))}}(t))},deleteProject:function(t){return e(function(e){var t={method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json"}};return function(n){fetch("".concat(v,"/projects/").concat(e),t).then((function(e){return e.json()})).then((function(){n({type:"DELETE_PROJECT",id:e})}))}}(t))},editProject:function(t){return e(T(t))},addTask:function(t){return e(y(t))},deleteTask:function(t){return e(P(t))},editTask:function(t){return e(C(t))}}}))(Y),V=function(e){Object(f.a)(n,e);var t=Object(E.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this;this.props.projects.find((function(t){return t.id.toString()===e.props.match.params.id}))}}]),n}(a.Component),X=Object(l.b)((function(e){return{tasks:e.tasks,projects:e.projects,people:e.people}}),(function(e){return{addTask:function(t){return e(y(t))},deleteTask:function(t){return e(P(t))},editTask:function(t){return e(C(t))},editProject:function(t){return e(T(t))}}}))(V),Z=n(433),ee=function(e){Object(f.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={showTasksModal:!1},e.renderTasks=function(){var t,n=e.props.tasks.filter((function(t){return t.person_id===e.props.id})).map((function(n){return t=e.props.projects.find((function(e){return e.id===n.project_id})),r.a.createElement("li",{key:n.id}," ",r.a.createElement(k.b,{onClick:e.handleShowTasksModal},t.title," Project"),": ",n.description,"  ",n.completed?r.a.createElement("p",null,"(Completed)"):r.a.createElement("p",null,"(InProgress)"),"   ")}));return r.a.createElement("ul",null,n)},e.handleShowTasksModal=function(){e.setState({showTasksModal:!0})},e.handleHideTasksModal=function(){e.setState({showTasksModal:!1})},e}return Object(h.a)(n,[{key:"render",value:function(){var e,t=this;return this.props.tasks.filter((function(e){return e.person_id===t.props.id})).map((function(n){return e=t.props.projects.find((function(e){return e.id===n.project_id}))})),r.a.createElement(r.a.Fragment,null,this.state.showTasksModal?r.a.createElement(G,{handleHideTasksModal:this.handleHideTasksModal,project:e,tasks:this.props.tasks,people:this.props.people,editProject:this.props.editProject,addTask:this.props.addTask,deleteTask:this.props.deleteTask,editTask:this.props.editTask}):null,r.a.createElement(w.a.Column,null,r.a.createElement(Z.a,{image:this.props.image,header:this.props.username,description:this.renderTasks})))}}]),n}(a.Component),te=function(e){Object(f.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).renderPeople=function(){return e.props.people.map((function(t){return r.a.createElement(ee,{editProject:e.props.editProject,addTask:e.props.addTask,deleteTask:e.props.deleteTask,editTask:e.props.editTask,people:e.props.people,projects:e.props.projects,key:t.id,id:t.id,username:t.username,image:t.image,tasks:e.props.tasks})}))},e}return Object(h.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{stackable:!0,container:!0,columns:2},this.renderPeople()))}}]),n}(a.Component),ne=Object(l.b)((function(e){return{people:e.people,tasks:e.tasks,projects:e.projects}}),(function(e){return{addPerson:function(t){return e({type:"ADD_PERSON",person:t})},editProject:function(t){return e(T(t))},addTask:function(t){return e(y(t))},deleteTask:function(t){return e(P(t))},editTask:function(t){return e(C(t))}}}))(te),ae="https://secure-shelf-48338.herokuapp.com/";var re=function(e){return function(t){return fetch("".concat(ae,"/auth"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({user:e})}).then((function(e){return e.json()}))}};var oe=n(434),ce=function(e){Object(f.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={username:"",password:"",showSucces:!1,error:!1},e.handleChange=function(t){e.setState(Object(D.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){return t.preventDefault(),e.props.createUser({username:e.state.username,password:e.state.password})?e.setState({showSucces:!0}):e.setState({error:!0})},e.renderForm=function(){return e.state.showSucces?r.a.createElement(oe.a,{success:!0},"User Successfully created"):r.a.createElement(_.a,{onSubmit:e.handleSubmit},r.a.createElement("h1",null,"Sign Up For An Account"),r.a.createElement("label",null,"Username"),r.a.createElement(_.a.Input,{name:"username",placeholder:"Username",value:e.state.username,onChange:e.handleChange}),r.a.createElement("br",null),r.a.createElement("label",null,"Password"),r.a.createElement(_.a.Input,{type:"password",name:"password",placeholder:"Password",value:e.state.password,onChange:e.handleChange}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{type:"submit"}))},e}return Object(h.a)(n,[{key:"render",value:function(){return r.a.createElement(w.a,{stackable:!0,container:!0,columns:1},r.a.createElement(w.a.Column,null,this.renderForm()))}}]),n}(a.Component),se=Object(l.b)(null,(function(e){return{createUser:function(t){return e(function(e){return function(t){return fetch("".concat(ae,"/people"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({user:e})}).then((function(e){return e.json()})).then((function(e){var n=e.data.attributes;t({type:"ADD_PERSON",newPerson:n})}))}}(t))}}}))(ce),le=function(e){Object(f.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",error:!1},e.handleChange=function(t){e.setState(Object(D.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.loginUser(e.state).then((function(t){t.error?(console.log(t.error),e.setState({error:!0})):(e.props.handleLogin(t),e.props.history.push("/profile"))}))},e}return Object(h.a)(n,[{key:"render",value:function(){return r.a.createElement(w.a,{stackable:!0,container:!0,columns:1},r.a.createElement(w.a.Column,null,r.a.createElement(_.a,{onSubmit:this.handleSubmit,error:!0},r.a.createElement("h1",null,"Login into your account"),r.a.createElement("label",null,"Username"),r.a.createElement(_.a.Input,{name:"username",placeholder:"Username",value:this.state.username,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("label",null,"Password"),r.a.createElement(_.a.Input,{type:"password",name:"password",placeholder:"Password",value:this.state.password,onChange:this.handleChange}),r.a.createElement("br",null),this.state.error?r.a.createElement(oe.a,{error:!0,content:"Wrong username or password"}):null,r.a.createElement("br",null),r.a.createElement("input",{type:"submit"}))))}}]),n}(a.Component),ie=Object(l.b)(null,(function(e){return{loginUser:function(t){return e(re(t))}}}))(le),ue=function(e){Object(f.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={showTasksModal:!1},e.renderTasks=function(){var t,n=e.props.tasks.filter((function(t){return t.person_id===e.props.currentUser.id})).map((function(n){return t=e.props.projects.find((function(e){return e.id===n.project_id})),r.a.createElement("li",{key:n.id}," ",r.a.createElement(k.b,{onClick:e.handleShowTasksModal},t.title," Project"),": ",n.description,"  ",n.completed?r.a.createElement("p",null,"(Completed)"):r.a.createElement("p",null,"(InProgress)"),"   ")}));return r.a.createElement("ul",null,n)},e.handleShowTasksModal=function(){e.setState({showTasksModal:!0})},e.handleHideTasksModal=function(){e.setState({showTasksModal:!1})},e.handleDeletePerson=function(t){e.props.deletePerson(t.target.id),localStorage.removeItem("token"),e.props.history.push("/signup")},e.renderProfile=function(){if(e.props.currentUser.username){var t,n=e.props.people.find((function(t){return t.username===e.props.currentUser.username}));return e.props.tasks.filter((function(t){return t.person_id===e.props.currentUser.id})).map((function(n){return t=e.props.projects.find((function(e){return e.id===n.project_id}))})),r.a.createElement("div",null,e.state.showTasksModal?r.a.createElement(G,{handleHideTasksModal:e.handleHideTasksModal,project:t,tasks:e.props.tasks,people:e.props.people,editProject:e.props.editProject,addTask:e.props.addTask,deleteTask:e.props.deleteTask,editTask:e.props.editTask}):null,r.a.createElement(w.a,{stackable:!0,container:!0,columns:2},r.a.createElement(w.a.Column,null,r.a.createElement(Z.a,{image:n.image,header:n.username}),r.a.createElement(A.a,{id:n.id,onClick:function(t){return e.handleDeletePerson(t)}},"Delete my Account")),r.a.createElement(w.a.Column,null,r.a.createElement(Z.a,{header:"Tasks",description:e.renderTasks}))))}},e}return Object(h.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.renderProfile())}}]),n}(a.Component),pe=function(e){Object(f.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={auth:{currentUser:{}},showTasksModal:!1},e.handleLogin=function(t){var n={currentUser:t};e.setState({auth:n})},e.handleLogout=function(){localStorage.removeItem("token"),e.setState({auth:{currentUser:{}}})},e.handleHideTasksModal=function(){e.setState({showTasksModal:!1})},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.fetchProjects(),this.props.fetchPeople(),this.props.fetchTasks(),localStorage.getItem("token")&&this.props.loginUser().then((function(t){var n={currentUser:t};e.setState({auth:n})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,null,r.a.createElement("div",{className:"flexbox"},r.a.createElement(b,null),r.a.createElement("div",{className:"main"},r.a.createElement(g,{currentUser:this.state.auth.currentUser,handleLogout:this.handleLogout}),r.a.createElement("div",{className:"ui container"},r.a.createElement(j.a,{exact:!0,path:"/",render:function(t){return localStorage.token?r.a.createElement(ue,Object.assign({},t,{people:e.props.people,tasks:e.props.tasks,projects:e.props.projects,deletePerson:e.props.deletePerson,currentUser:e.state.auth.currentUser,editProject:e.props.editProject,addTask:e.props.addTask,deleteTask:e.props.deleteTask,editTask:e.props.editTask})):r.a.createElement(ie,Object.assign({},t,{handleLogin:e.handleLogin}))}}),r.a.createElement(j.a,{exact:!0,path:"/projects",render:function(e){return r.a.createElement($,e)}}),r.a.createElement(j.a,{exact:!0,path:"/".concat("project","-:id"),render:function(e){return r.a.createElement(X,e)}}),r.a.createElement(j.a,{exact:!0,path:"/people"},r.a.createElement(ne,null)),r.a.createElement(j.a,{exact:!0,path:"/signup",render:function(e){return r.a.createElement(se,e)}}),r.a.createElement(j.a,{exact:!0,path:"/login",render:function(t){return r.a.createElement(ie,Object.assign({},t,{handleLogin:e.handleLogin}))}}),r.a.createElement(j.a,{exact:!0,path:"/profile",render:function(t){return r.a.createElement(ue,Object.assign({},t,{people:e.props.people,tasks:e.props.tasks,projects:e.props.projects,deletePerson:e.props.deletePerson,currentUser:e.state.auth.currentUser,editProject:e.props.editProject,addTask:e.props.addTask,deleteTask:e.props.deleteTask,editTask:e.props.editTask}))}}))))))}}]),n}(a.Component),de=Object(l.b)((function(e){return{projects:e.projects,people:e.people,tasks:e.tasks}}),(function(e){return{fetchProjects:function(){return e((function(e){e({type:"LOADING_PROJECTS"}),fetch("".concat(v,"/projects")).then((function(e){return e.json()})).then((function(t){e({type:"LOAD_PROJECTS",projects:t})})).catch((function(e){return console.log(e.message)}))}))},fetchPeople:function(){return e((function(e){fetch("".concat(ae,"/people")).then((function(e){return e.json()})).then((function(t){e({type:"LOAD_PEOPLE",people:t})})).catch((function(e){return console.log(e.message)}))}))},fetchTasks:function(){return e((function(e){fetch("".concat(O,"/tasks")).then((function(e){return e.json()})).then((function(t){e({type:"LOAD_TASKS",tasks:t})})).catch((function(e){return console.log(e.message)}))}))},loginUser:function(){return e(re())},deletePerson:function(t){return e(function(e){var t={method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json"}};return function(n){fetch("".concat(ae,"/people/").concat(e),t).then((function(e){return e.json()})).then((function(){n({type:"DELETE_PERSON",id:e})}))}}(t))},editProject:function(t){return e(T(t))},addTask:function(t){return e(y(t))},deleteTask:function(t){return e(P(t))},editTask:function(t){return e(C(t))}}}))(pe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(416);var me=Object(s.d)(d,Object(s.a)(i.a));c.a.render(r.a.createElement(l.a,{store:me},r.a.createElement(de,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},90:function(e,t,n){}},[[253,1,2]]]);
//# sourceMappingURL=main.6c2ac54c.chunk.js.map