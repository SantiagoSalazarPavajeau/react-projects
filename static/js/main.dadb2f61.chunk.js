(this["webpackJsonpreact-projects"]=this["webpackJsonpreact-projects"]||[]).push([[0],{253:function(e,t,n){e.exports=n(417)},417:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return Z}));var a=n(0),r=n.n(a),c=n(44),o=n.n(c),i=n(60),l=n(41),s=n(223),p=n(27),u=n(224);n.n(u).a;var d=Object(i.c)({projects:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PROJECT":var n={title:t.newProject.title,started:"",description:t.newProject.description,id:t.newProject.id};return[].concat(Object(p.a)(e),[n]);case"DELETE_PROJECT":return Object(p.a)(e.filter((function(e){return e.id!==t.id})));case"EDIT_PROJECT":var a=e.findIndex((function(e){return e.id===t.project.id}));return[].concat(Object(p.a)(e.slice(0,a)),[t.project],Object(p.a)(e.slice(a+1)));case"LOAD_PROJECTS":var r=t.projects.data.map((function(e){return e.attributes}));return Object(p.a)(e.concat(r));case"LOADING_PROJECTS":return Object(p.a)(e);default:return e}},tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TASK":return console.log(t.task),console.log(e),Object(p.a)(e.concat(t.newTask));case"DELETE_TASK":return Object(p.a)(e.filter((function(e){return e.id!==t.id})));case"EDIT_TASK":var n=e.findIndex((function(e){return e.id===t.task.id}));return console.log(t.task),[].concat(Object(p.a)(e.slice(0,n)),[t.task],Object(p.a)(e.slice(n+1)));case"LOAD_TASKS":var a=t.tasks.data.map((function(e){return e.attributes}));return Object(p.a)(e.concat(a));default:return e}},people:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PEOPLE":var n={name:"Santi",id:"1",image:{avatar:!0,src:"https://api.adorable.io/avatars/70"}};return[].concat(Object(p.a)(e),[n]);case"LOAD_PEOPLE":var a=t.people.data.map((function(e){return e.attributes}));return Object(p.a)(e.concat(a));default:return e}}}),m=n(15),f=n(16),h=n(17),E=n(21),j=n(39),v=n(22),b=(n(90),function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:"ui left vertical inverted icon visible sidebar menu"},r.a.createElement(j.b,{to:"/projects",className:"item"},r.a.createElement("i",{"aria-hidden":"true",className:"home icon"}),"Home"),r.a.createElement(j.b,{to:"/projects",className:"item"},r.a.createElement("i",{"aria-hidden":"true",className:"sitemap icon"}),"Projects"),r.a.createElement(j.b,{to:"/people",className:"item"},r.a.createElement("i",{"aria-hidden":"true",className:"users icon"}),"People")))}}]),n}(a.Component)),g=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui stackable menu"},r.a.createElement("div",{className:"header item"},"Projects Dashboard"))}}]),n}(a.Component),O="https://secure-shelf-48338.herokuapp.com/";var k=n(34),y=n(161),C=n(121),P=n(244),T=n(431),D=n(434),S=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={title:"",description:"",showModal:!1},e.handleOnChange=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value))},e.handleOnSubmit=function(t){t.preventDefault(),e.props.saveProject(e.state),e.setState({title:"",description:"",showModal:!1})},e.openModal=function(){e.setState({showModal:!0})},e.closeModal=function(){e.setState({showModal:!1})},e.renderForm=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{onClick:e.openModal}," ",r.a.createElement("i",{className:"add icon center"})),r.a.createElement(C.a,{dimmer:"inverted",open:e.state.showModal},r.a.createElement(C.a.Header,null,"Add a project"),r.a.createElement(C.a.Content,{image:!0},r.a.createElement(P.a,{wrapped:!0,size:"medium",alt:"Workbench and tools",src:"https://images.unsplash.com/photo-1416339158484-9637228cc908?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1934&q=80"}),r.a.createElement(C.a.Description,null,r.a.createElement(T.a,null,r.a.createElement(D.a,null,"Title:"),r.a.createElement(T.a.Input,{type:"text",onChange:function(t){return e.handleOnChange(t)},value:e.state.title,name:"title",placeholder:e.state.title}),r.a.createElement(D.a,null,"Description:"),r.a.createElement(T.a.TextArea,{type:"textarea",onChange:function(t){return e.handleOnChange(t)},value:e.state.description,name:"description",placeholder:e.state.description}),r.a.createElement(T.a.Button,{onClick:function(t){return e.handleOnSubmit(t)},type:"submit"},"Submit"),r.a.createElement(T.a.Button,{onClick:e.closeModal,type:"submit"},"Cancel"))))))},e}return Object(f.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.renderForm())}}]),n}(a.Component),w=n(429),N=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={open:!1,edit:!1,percent:50},e.handleDeleteClick=function(t){e.setState({open:!0})},e.handleCancel=function(){e.setState({open:!1})},e.handleConfirm=function(){e.props.deleteProject(e.props.id),e.setState({open:!1})},e.setPercent=function(){console.log(e.props);e.setState({percent:0})},e}return Object(f.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"eight wide column"},r.a.createElement("div",{className:"ui card"},r.a.createElement("div",{className:"image"}),r.a.createElement("div",{className:"content"},r.a.createElement(j.b,{className:"header",to:"/projects/".concat(this.props.id)},this.props.title),r.a.createElement("div",{className:"meta"},r.a.createElement("span",{className:"date"},this.props.started)),r.a.createElement("div",{className:"description"},this.props.description),r.a.createElement("div",{className:"ui right aligned grid"},r.a.createElement("div",{className:"sixteen wide column"}))),r.a.createElement("div",{className:"extra content"},r.a.createElement("div",{className:"left floated right aligned six wide column"},r.a.createElement(j.b,{className:"header",to:"/projects/".concat(this.props.id)},r.a.createElement(y.a,{basic:!0,icon:"pencil"})),r.a.createElement(y.a,{basic:!0,icon:"trash",onClick:function(t){return e.handleDeleteClick(t)}}),r.a.createElement(w.a,{open:this.state.open,onCancel:this.handleCancel,onConfirm:this.handleConfirm})))))}}]),n}(a.Component),A=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={showFormModal:!1},e.renderProjects=function(){return e.props.projects.map((function(t){return r.a.createElement(N,{key:t.id,tasks:e.props.tasks,title:t.title,started:t.started,description:t.description,id:t.id,editProject:e.props.editProject,deleteProject:e.props.deleteProject})}))},e.renderModal=function(){e.setState({showFormModal:!0})},e}return Object(f.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"ui grid container"},r.a.createElement("div",{className:"eight wide column"},r.a.createElement(S,{saveProject:this.props.saveProject}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"ui grid container"},this.renderProjects()),r.a.createElement("br",null),r.a.createElement("br",null))}}]),n}(a.Component),_=Object(l.b)((function(e){return{projects:e.projects,taks:e.tasks}}),(function(e){return{saveProject:function(t){return e(function(e){var t={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({title:e.title,description:e.description})};return function(e){fetch("".concat(O,"/projects"),t).then((function(e){return e.json()})).then((function(t){var n=t.data.attributes;e({type:"ADD_PROJECT",newProject:n})}))}}(t))},deleteProject:function(t){return e(function(e){var t={method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json"}};return function(n){fetch("".concat(O,"/projects/").concat(e),t).then((function(e){return e.json()})).then((function(){n({type:"DELETE_PROJECT",id:e})}))}}(t))}}}))(A),x=n(62),L=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{as:"h2",icon:!0,textAlign:"center"},r.a.createElement("i",{"aria-hidden":"true",className:"users icon left"}),r.a.createElement(D.a.Content,null,"Projects")),r.a.createElement(D.a,{as:"h2",icon:!0,textAlign:"center"},r.a.createElement(x.a,{name:"settings",circular:!0}),r.a.createElement(D.a.Content,null,"Tasks")),r.a.createElement(D.a,{as:"h2",icon:!0,textAlign:"center"},r.a.createElement(x.a,{name:"plug",circular:!0}),r.a.createElement(D.a.Content,null,"Processes")))}}]),n}(a.Component),I=n(435),J=n(430),M=n(427),F=n(428),R=n(432),K=n(89),B=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={description:e.props.description,id:e.props.id,person_id:e.props.person_id,completed:e.props.completed,project_id:e.props.project_id},e.makeCompleted=function(){e.setState({completed:!0})},e.makeInProgress=function(){e.setState({completed:!1})},e.handleSave=function(){console.log(e.state.person_id),e.props.editTask(e.state)},e.handleDelete=function(){e.props.deleteTask(e.props.id)},e.assignTo=function(t){var n=e.props.people.findIndex((function(e){return e.key===t.target.innerText}));e.setState({person_id:e.props.people[n].id})},e.renderInProgress=function(){var t=e.props.people.find((function(t){return t.id===e.state.person_id}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement(M.a,{size:"small",labelPosition:"right",type:"text",value:e.state.description,placeholder:e.state.description},r.a.createElement(F.a,{onChange:function(t){return e.setState({description:t.target.value})},value:e.state.description,rows:"4",cols:"70"}),r.a.createElement(y.a,{onClick:e.handleSave,icon:"save"}),r.a.createElement(y.a,{onClick:e.makeCompleted,icon:"check circle"}),r.a.createElement(y.a,{onClick:e.handleDelete,icon:"trash"})),r.a.createElement("br",null),"Assigned to: ",r.a.createElement(R.a,{button:!0,className:"icon",placeholder:t?t.key:"Yet to be assigned",onChange:function(t){return e.assignTo(t)},floating:!0,labeled:!0,icon:"users",options:e.props.people}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null))},e.renderCompleted=function(){var t=e.props.people.find((function(t){return t.id===e.state.person_id}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement(K.a,{color:"green",image:!0},r.a.createElement("img",{alt:"Profile Pic",src:"https://api.adorable.io/avatars/77/stevie@adorable.io.png"}),"completed by ",t?t.key:"Yet to be assigned",r.a.createElement(K.a.Detail,null,e.props.description)),r.a.createElement(y.a,{onClick:e.handleSave,icon:"save"}),r.a.createElement(y.a,{onClick:e.makeInProgress,icon:"redo"}),r.a.createElement(y.a,{onClick:e.handleDelete,icon:"trash"}),r.a.createElement("br",null))},e}return Object(f.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,null,this.state.completed?this.renderCompleted():this.renderInProgress()))}}]),n}(a.Component),z=n(243),H=(n(415),function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={title:e.props.project.title,started:e.props.project.started,description:e.props.project.description,id:e.props.project.id,edit:!1,loading:!1},e.setPercent=function(){for(var t=e.props.tasks.filter((function(t){return t.project_id===e.state.id})),n=0,a=0,r=0,c=0;c<t.length;c++)!0===t[c].completed?(a++,console.log(a)):(r++,console.log(r)),n=a/(r+a);console.log(n),e.setState({percent:100*n})},e.startEdit=function(){e.setState({edit:!0})},e.cancelEdit=function(){e.setState({edit:!1})},e.saveEdit=function(t){t.preventDefault(),e.props.editProject({title:e.state.title,started:e.props.project.started,id:e.props.project.id,description:e.state.description}),e.setState({edit:!1})},e.handleOnChange=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value))},e.renderEdit=function(t){return r.a.createElement(C.a.Description,null,r.a.createElement(T.a,{onSubmit:function(t){return e.saveEdit(t)}},r.a.createElement(T.a.Input,{type:"text",onChange:function(t){return e.handleOnChange(t)},value:e.state.title,name:"title"}),r.a.createElement(T.a.TextArea,{type:"textarea",onChange:function(t){return e.handleOnChange(t)},value:e.state.description,name:"description"}),r.a.createElement(y.a,{icon:"save",type:"submit"}),r.a.createElement(y.a,{icon:"close",onClick:e.cancelEdit})))},e.renderDescription=function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{columns:3},r.a.createElement(I.a.Row,null,r.a.createElement(I.a.Column,null,r.a.createElement(y.a,{basic:!0,secondary:!0,content:"Edit Project",labelPosition:"right",icon:"pencil",onClick:function(t){return e.startEdit(t)}})),r.a.createElement(I.a.Column,null),r.a.createElement(I.a.Column,null,r.a.createElement(y.a,{basic:!0,content:"Exit Project Page",onClick:e.props.history.goBack,secondary:!0})))),r.a.createElement(D.a,null,t.title),r.a.createElement("p",null,t.description))},e.renderTasks=function(){return e.props.tasks.filter((function(t){return t.project_id===e.state.id})).map((function(t){return r.a.createElement(B,{key:t.id,people:e.props.people,person_id:t.person_id,deleteTask:e.props.deleteTask,project_id:e.state.id,editTask:e.props.editTask,id:t.id,description:t.description,completed:t.completed})}))},e.handleAddTask=function(){e.props.addTask(e.state.id),console.log(e.state.id)},e.renderModal=function(){if(e.props.loading)return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"ui grid container"},r.a.createElement("div",{className:"eight wide column"},r.a.createElement(C.a,{size:"large",dimmer:"inverted",open:!0},r.a.createElement("p",null,"Loading")))));var t=e.props.project;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"ui grid container"},r.a.createElement("div",{className:"eight wide column"},r.a.createElement(C.a,{size:"large",dimmer:"inverted",open:!0},r.a.createElement(C.a.Header,null),r.a.createElement(C.a.Content,{image:!0,scrolling:!0},r.a.createElement(P.a,{size:"medium",alt:"Workbench and tools",src:"https://images.unsplash.com/photo-1416339158484-9637228cc908?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1934&q=80",wrapped:!0}),r.a.createElement(C.a.Description,null,e.state.edit?e.renderEdit(t):e.renderDescription(t),r.a.createElement(z.Progress,{type:"circle",width:30,percent:e.state.percent,status:"success"}),r.a.createElement(J.a,{horizontal:!0},"Tasks"),r.a.createElement(y.a,{basic:!0,secondary:!0,onClick:e.handleAddTask},"Add Task"),r.a.createElement("br",null),e.renderTasks()))))))},e}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.setPercent()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.renderModal())}}]),n}(a.Component)),W=(Object(v.e)(H),"https://secure-shelf-48338.herokuapp.com/");var q=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this;this.props.projects.find((function(t){return t.id.toString()===e.props.match.params.id}))}}]),n}(a.Component),G=Object(l.b)((function(e){return{tasks:e.tasks,projects:e.projects,people:e.people}}),(function(e){return{addTask:function(t){return e(function(e){var t={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({description:"New task...",project_id:e,person_id:1,completed:!1})};return function(e){fetch("".concat(W,"/tasks"),t).then((function(e){return e.json()})).then((function(t){var n=t.data.attributes;console.log(t),e({type:"ADD_TASK",newTask:n})}))}}(t))},deleteTask:function(t){return e(function(e){var t={method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json"}};return function(n){fetch("".concat(W,"/tasks/").concat(e),t).then((function(e){return e.json()})).then((function(){n({type:"DELETE_TASK",id:e})}))}}(t))},editTask:function(t){return e(function(e){var t={method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({description:e.description,person_id:parseInt(e.person_id),project_id:e.project_id,completed:e.completed})};return function(n){fetch("".concat(W,"/tasks/").concat(e.id),t).then((function(e){return e.json()})).then((function(e){console.log(e);var t=e.data.attributes;n({type:"EDIT_TASK",task:t})}))}}(t))},editProject:function(t){return e(function(e){var t={method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({title:e.title,description:e.description})};return function(n){fetch("".concat(O,"/projects/").concat(e.id),t).then((function(e){return e.json()})).then((function(e){console.log(e);var t=e.data.attributes;n({type:"EDIT_PROJECT",project:t})}))}}(t))}}}))(q),Q=n(433),Y=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this,t=this.props.tasks.filter((function(t){return t.person_id===e.props.id}));return r.a.createElement("div",{className:"four wide column"},r.a.createElement(Q.a,{image:this.props.image.src,header:this.props.name,meta:"Software Engineer",description:r.a.createElement("ul",null,t.map((function(e){return r.a.createElement("li",{key:e.id}," ",e.description," ",e.completed?r.a.createElement("p",null,"(Completed)"):r.a.createElement("p",null,"(InProgress)"))})))}))}}]),n}(a.Component),U=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).renderPeople=function(){return e.props.people.map((function(t){return r.a.createElement(Y,{key:t.id,id:t.id,name:t.key,image:t.image,tasks:e.props.tasks})}))},e}return Object(f.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui grid container"},this.renderPeople())}}]),n}(a.Component),$=Object(l.b)((function(e){return{people:e.people,tasks:e.tasks}}),(function(e){return{addPerson:function(t){return e({type:"ADD_PERSON",person:t})}}}))(U);var V=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchProjects(),this.props.fetchPeople(),this.props.fetchTasks()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,null,r.a.createElement("div",{className:"flexbox"},r.a.createElement(b,null),r.a.createElement("div",{className:"main"},r.a.createElement(g,null),r.a.createElement("div",{className:"ui container"},r.a.createElement(v.a,{exact:!0,path:"/",render:function(){return r.a.createElement(L,null)}}),r.a.createElement(v.a,{exact:!0,path:"/login"},r.a.createElement("p",null,"Login")),r.a.createElement(v.a,{exact:!0,path:"/projects",render:function(e){return r.a.createElement(_,e)}}),r.a.createElement(v.a,{exact:!0,path:"/projects/:id",render:function(e){return r.a.createElement(G,e)}}),r.a.createElement(v.a,{exact:!0,path:"/people"},r.a.createElement($,null)))))))}}]),n}(a.Component),X=Object(l.b)((function(e){return{projects:e.projects,people:e.people,tasks:e.tasks}}),(function(e){return{fetchProjects:function(){return e((function(e){e({type:"LOADING_PROJECTS"}),fetch("".concat(O,"/projects")).then((function(e){return e.json()})).then((function(t){e({type:"LOAD_PROJECTS",projects:t})})).catch((function(e){return console.log(e.message)}))}))},fetchPeople:function(){return e((function(e){fetch("".concat("https://secure-shelf-48338.herokuapp.com/","/people")).then((function(e){return e.json()})).then((function(t){e({type:"LOAD_PEOPLE",people:t})})).catch((function(e){return console.log(e.message)}))}))},fetchTasks:function(){return e((function(e){fetch("".concat(W,"/tasks")).then((function(e){return e.json()})).then((function(t){e({type:"LOAD_TASKS",tasks:t})})).catch((function(e){return console.log(e.message)}))}))}}}))(V);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(416);var Z=Object(i.d)(d,Object(i.a)(s.a));o.a.render(r.a.createElement(l.a,{store:Z},r.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},90:function(e,t,n){}},[[253,1,2]]]);
//# sourceMappingURL=main.dadb2f61.chunk.js.map